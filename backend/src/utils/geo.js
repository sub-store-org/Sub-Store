import $ from '@/core/app';

const ISOFlags = {
    'üè≥Ô∏è‚Äçüåà': ['EXP', 'BAND'],
    'üá∏üá±': ['TEST', 'SOS'],
    'üá¶üá©': ['AD', 'AND'],
    'üá¶üá™': ['AE', 'ARE'],
    'üá¶üá´': ['AF', 'AFG'],
    'üá¶üá±': ['AL', 'ALB'],
    'üá¶üá≤': ['AM', 'ARM'],
    'üá¶üá∑': ['AR', 'ARG'],
    'üá¶üáπ': ['AT', 'AUT'],
    'üá¶üá∫': ['AU', 'AUS'],
    'üá¶üáø': ['AZ', 'AZE'],
    'üáßüá¶': ['BA', 'BIH'],
    'üáßüá©': ['BD', 'BGD'],
    'üáßüá™': ['BE', 'BEL'],
    'üáßüá¨': ['BG', 'BGR'],
    'üáßüá≠': ['BH', 'BHR'],
    'üáßüá¥': ['BO', 'BOL'],
    'üáßüá≥': ['BN', 'BRN'],
    'üáßüá∑': ['BR', 'BRA'],
    'üáßüáπ': ['BT', 'BTN'],
    'üáßüáæ': ['BY', 'BLR'],
    'üá®üá¶': ['CA', 'CAN'],
    'üá®üá≠': ['CH', 'CHE'],
    'üá®üá±': ['CL', 'CHL'],
    'üá®üá¥': ['CO', 'COL'],
    'üá®üá∑': ['CR', 'CRI'],
    'üá®üáæ': ['CY', 'CYP'],
    'üá®üáø': ['CZ', 'CZE'],
    'üá©üá™': ['DE', 'DEU'],
    'üá©üá∞': ['DK', 'DNK'],
    'üá™üá®': ['EC', 'ECU'],
    'üá™üá™': ['EE', 'EST'],
    'üá™üá¨': ['EG', 'EGY'],
    'üá™üá∏': ['ES', 'ESP'],
    'üá™üá∫': ['EU'],
    'üá´üáÆ': ['FI', 'FIN'],
    'üá´üá∑': ['FR', 'FRA'],
    'üá¨üáß': ['GB', 'GBR', 'UK'],
    'üá¨üá™': ['GE', 'GEO'],
    'üá¨üá∑': ['GR', 'GRC'],
    'üá¨üáπ': ['GT', 'GTM'],
    'üá¨üá∫': ['GU', 'GUM'],
    'üá≠üá∞': ['HK', 'HKG', 'HKT', 'HKBN', 'HGC', 'WTT', 'CMI'],
    'üá≠üá∑': ['HR', 'HRV'],
    'üá≠üá∫': ['HU', 'HUN'],
    'üáÆüá∂': ['IQ', 'IRQ'], // ‰ºäÊãâÂÖã
    'üáØüá¥': ['JO', 'JOR'],
    'üáØüáµ': ['JP', 'JPN', 'TYO'],
    'üá∞üá™': ['KE', 'KEN'],
    'üá∞üá¨': ['KG', 'KGZ'],
    'üá∞üá≠': ['KH', 'KGZ'],
    'üá∞üáµ': ['KP', 'PRK'],
    'üá∞üá∑': ['KR', 'KOR', 'SEL'],
    'üá∞üáø': ['KZ', 'KAZ'],
    'üáÆüá©': ['ID', 'IDN'],
    'üáÆüá™': ['IE', 'IRL'],
    'üáÆüá±': ['IL', 'ISR'],
    'üáÆüá≤': ['IM', 'IMN'],
    'üáÆüá≥': ['IN', 'IND'],
    'üáÆüá∑': ['IR', 'IRN'],
    'üáÆüá∏': ['IS', 'ISL'],
    'üáÆüáπ': ['IT', 'ITA'],
    'üá±üá¶': ['LA', 'LAO'],
    'üá±üá∞': ['LK', 'LKA'],
    'üá±üáπ': ['LT', 'LTU'],
    'üá±üá∫': ['LU', 'LUX'],
    'üá±üáª': ['LV', 'LVA'],
    'üá≤üá¶': ['MA', 'MAR'],
    'üá≤üá©': ['MD', 'MDA'],
    'üá≥üá¨': ['NG', 'NGA'],
    'üá≤üá≤': ['MM', 'MMR'],
    'üá≤üá∞': ['MK', 'MKD'],
    'üá≤üá≥': ['MN', 'MNG'],
    'üá≤üá¥': ['MO', 'MAC', 'CTM'],
    'üá≤üáπ': ['MT', 'MLT'],
    'üá≤üáΩ': ['MX', 'MEX'],
    'üá≤üáæ': ['MY', 'MYS'],
    'üá≥üá±': ['NL', 'NLD', 'AMS'],
    'üá≥üá¥': ['NO', 'NOR'],
    'üá≥üáµ': ['NP', 'NPL'],
    'üá≥üáø': ['NZ', 'NZL'],
    'üáµüá¶': ['PA', 'PAN'],
    'üáµüá™': ['PE', 'PER'],
    'üáµüá≠': ['PH', 'PHL'],
    'üáµüá∞': ['PK', 'PAK'],
    'üáµüá±': ['PL', 'POL'],
    'üáµüá∑': ['PR', 'PRI'],
    'üáµüáπ': ['PT', 'PRT'],
    'üáµüáæ': ['PY', 'PRY'],
    'üáµüá¨': ['PG', 'PNG'],
    'üá∑üá¥': ['RO', 'ROU'],
    'üá∑üá∏': ['RS', 'SRB'],
    'üá∑üá™': ['RE', 'REU'],
    'üá∑üá∫': ['RU', 'RUS'],
    'üá∏üá¶': ['SA', 'SAU'],
    'üá∏üá™': ['SE', 'SWE'],
    'üá∏üá¨': ['SG', 'SGP'],
    'üá∏üáÆ': ['SI', 'SVN'],
    'üá∏üá∞': ['SK', 'SVK'],
    'üáπüá¨': ['TG', 'TGO'], // Â§öÂì•
    'üáπüá≠': ['TH', 'THA'],
    'üáπüá≥': ['TN', 'TUN'],
    'üáπüá∑': ['TR', 'TUR'],
    'üáπüáº': ['TW', 'TWN', 'CHT', 'HINET', 'ROC'],
    'üá∫üá¶': ['UA', 'UKR'],
    'üá∫üá∏': ['US', 'USA', 'LAX', 'SFO', 'SJC'],
    'üá∫üáæ': ['UY', 'URY'],
    'üáªüá™': ['VE', 'VEN'],
    'üáªüá≥': ['VN', 'VNM'],
    'üáøüá¶': ['ZA', 'ZAF', 'JNB'],
    'üá®üá≥': ['CN', 'CHN', 'BACK'],
};
// get proxy flag according to its name
export function getFlag(name) {
    // flags from @KOP-XIAO: https://github.com/KOP-XIAO/QuantumultX/blob/master/Scripts/resource-parser.js
    // flags from @surgioproject: https://github.com/surgioproject/surgio/blob/master/lib/misc/flag_cn.ts

    // refer: https://zh.wikipedia.org/wiki/ISO_3166-1‰∫å‰ΩçÂ≠óÊØç‰ª£Á†Å
    // refer: https://zh.wikipedia.org/wiki/ISO_3166-1‰∏â‰ΩçÂ≠óÊØç‰ª£Á†Å
    const Flags = {
        'üè≥Ô∏è‚Äçüåà': ['ÊµÅÈáè', 'Êó∂Èó¥', 'ËøáÊúü', 'Bandwidth', 'Expire'],
        'üá∏üá±': ['Â∫îÊÄ•', 'ÊµãËØïËäÇÁÇπ'],
        'üá¶üá©': ['Andorra', 'ÂÆâÈÅìÂ∞î'],
        'üá¶üá™': ['United Arab Emirates', 'ÈòøËÅîÈÖã', 'Ëø™Êãú'],
        'üá¶üá´': ['Afghanistan', 'ÈòøÂØåÊ±ó'],
        'üá¶üá±': ['Albania', 'ÈòøÂ∞îÂ∑¥Â∞º‰∫ö', 'ÈòøÁàæÂ∑¥Â∞º‰∫û'],
        'üá¶üá≤': ['Armenia', '‰∫öÁæéÂ∞º‰∫ö'],
        'üá¶üá∑': ['Argentina', 'ÈòøÊ†πÂª∑'],
        'üá¶üáπ': ['Austria', 'Â••Âú∞Âà©', 'Â•ßÂú∞Âà©', 'Áª¥‰πüÁ∫≥'],
        'üá¶üá∫': [
            'Australia',
            'Êæ≥Â§ßÂà©‰∫ö',
            'Êæ≥Ê¥≤',
            'Â¢®Â∞îÊú¨',
            'ÊÇâÂ∞º',
            'ÂúüÊæ≥',
            '‰∫¨Êæ≥',
            'Âª£Êæ≥',
            'Êª¨Êæ≥',
            'Ê≤™Êæ≥',
            'ÂπøÊæ≥',
            'Sydney',
        ],
        'üá¶üáø': ['Azerbaijan', 'ÈòøÂ°ûÊãúÁñÜ'],
        'üáßüá¶': ['Bosnia and Herzegovina', 'Ê≥¢ÈªëÂÖ±ÂíåÂõΩ', 'Ê≥¢Èªë'],
        'üáßüá©': ['Bangladesh', 'Â≠üÂä†ÊãâÂõΩ', 'Â≠üÂä†Êãâ'],
        'üáßüá™': ['Belgium', 'ÊØîÂà©Êó∂', 'ÊØîÂà©ÊôÇ'],
        'üáßüá¨': ['Bulgaria', '‰øùÂä†Âà©‰∫ö', '‰øùÂä†Âà©‰∫û'],
        'üáßüá≠': ['Bahrain', 'Â∑¥Êûó'],
        'üáßüá∑': ['Brazil', 'Â∑¥Ë•ø', 'Âú£‰øùÁΩó'],
        'üáßüá≥': ['Brunei', 'ÊñáËé±', 'Ê±∂Ëêä'],
        'üáßüáæ': ['Belarus', 'ÁôΩ‰øÑÁΩóÊñØ', 'ÁôΩ‰øÑ'],
        'üáßüá¥': ['Bolivia', 'ÁéªÂà©Áª¥‰∫ö'],
        'üáßüáπ': ['Bhutan', '‰∏ç‰∏π', '‰∏ç‰∏πÁéãÂõΩ'],
        'üá®üá¶': [
            'Canada',
            'Âä†ÊãøÂ§ß',
            'ËíôÁâπÂà©Â∞î',
            'Ê∏©Âì•Âçé',
            'Ê•ìËëâ',
            'Êû´Âè∂',
            'ÊªëÈìÅÂç¢',
            'Â§ö‰º¶Â§ö',
            'Waterloo',
            'Toronto',
        ],
        'üá®üá≠': ['Switzerland', 'ÁëûÂ£´', 'ËãèÈªé‰∏ñ', 'Zurich'],
        'üá®üá±': ['Chile', 'Êô∫Âà©'],
        'üá®üá¥': ['Colombia', 'Âì•‰º¶ÊØî‰∫ö'],
        'üá®üá∑': ['Costa Rica', 'Âì•ÊñØËææÈªéÂä†'],
        'üá®üáæ': ['Cyprus', 'Â°ûÊµ¶Ë∑ØÊñØ'],
        'üá®üáø': ['Czechia', 'Êç∑ÂÖã'],
        'üá©üá™': [
            'German',
            'Âæ∑ÂõΩ',
            'Âæ∑Âúã',
            '‰∫¨Âæ∑',
            'Êª¨Âæ∑',
            'Âª£Âæ∑',
            'Ê≤™Âæ∑',
            'ÂπøÂæ∑',
            'Ê≥ïÂÖ∞ÂÖãÁ¶è',
            'Frankfurt',
            'Âæ∑ÊÑèÂøó',
        ],
        'üá©üá∞': ['Denmark', '‰∏πÈ∫¶', '‰∏πÈ∫•'],
        'üá™üá®': ['Ecuador', 'ÂéÑÁìúÂ§öÂ∞î'],
        'üá™üá™': ['Estonia', 'Áà±Ê≤ôÂ∞º‰∫ö'],
        'üá™üá¨': ['Egypt', 'ÂüÉÂèä'],
        'üá™üá∏': ['Spain', 'Ë•øÁè≠Áâô'],
        'üá™üá∫': ['European Union', 'Ê¨ßÁõü', 'Ê¨ßÁΩóÂ∑¥'],
        'üá´üáÆ': ['Finland', 'Ëä¨ÂÖ∞', 'Ëä¨Ëò≠', 'Ëµ´Â∞îËæõÂü∫'],
        'üá´üá∑': ['France', 'Ê≥ïÂõΩ', 'Ê≥ïÂúã', 'Â∑¥Èªé'],
        'üá¨üáß': [
            'Great Britain',
            'Ëã±ÂõΩ',
            'England',
            'United Kingdom',
            '‰º¶Êï¶',
            'Ëã±',
            'London',
        ],
        'üá¨üá™': ['Georgia', 'Ê†ºÈ≤ÅÂêâ‰∫ö', 'Ê†ºÈ≠ØÂêâ‰∫û'],
        'üá¨üá∑': ['Greece', 'Â∏åËÖä', 'Â∏åËáò'],
        'üá¨üá∫': ['Guam', 'ÂÖ≥Â≤õ', 'ÈóúÂ≥∂'],
        'üá¨üáπ': ['Guatemala', 'Âç±Âú∞È©¨Êãâ'],
        'üá≠üá∞': [
            'Hongkong',
            'È¶ôÊ∏Ø',
            'Hong Kong',
            'HongKong',
            'HONG KONG',
            'Ê∑±Ê∏Ø',
            'Ê≤™Ê∏Ø',
            'ÂëºÊ∏Ø',
            'Á©óÊ∏Ø',
            '‰∫¨Ê∏Ø',
            'Ê∏Ø',
        ],
        'üá≠üá∑': ['Croatia', 'ÂÖãÁΩóÂú∞‰∫ö', 'ÂÖãÁæÖÂú∞‰∫û'],
        'üá≠üá∫': ['Hungary', 'ÂåàÁâôÂà©'],
        'üáÆüá∂': ['Iraq', '‰ºäÊãâÂÖã', 'Â∑¥Ê†ºËææ', 'Baghdad'], // ‰ºäÊãâÂÖã
        'üáØüá¥': ['Jordan', 'Á∫¶Êó¶'],
        'üáØüáµ': [
            'Japan',
            'Êó•Êú¨',
            '‰∏ú‰∫¨',
            'Â§ßÈò™',
            'ÂüºÁéâ',
            'Ê≤™Êó•',
            'Á©óÊó•',
            'Â∑ùÊó•',
            '‰∏≠Êó•',
            'Ê≥âÊó•',
            'Êù≠Êó•',
            'Ê∑±Êó•',
            'ËæΩÊó•',
            'ÂπøÊó•',
            'Â§ßÂùÇ',
            'Osaka',
            'Tokyo',
        ],
        'üá∞üá™': ['Kenya', 'ËÇØÂ∞º‰∫ö'],
        'üá∞üá¨': ['Kyrgyzstan', 'ÂêâÂ∞îÂêâÊñØÊñØÂù¶'],
        'üá∞üá≠': ['Cambodia', 'Êü¨ÂüîÂØ®'],
        'üá∞üáµ': ['North Korea', 'ÊúùÈ≤ú'],
        'üá∞üá∑': [
            'Korea',
            'Èü©ÂõΩ',
            'ÈüìÂúã',
            'Èü©',
            'Èüì',
            'È¶ñÂ∞î',
            'Êò•Â∑ù',
            'Chuncheon',
            'Seoul',
        ],
        'üá∞üáø': ['Kazakhstan', 'ÂìàËê®ÂÖãÊñØÂù¶', 'ÂìàËê®ÂÖã'],
        'üáÆüá©': ['Indonesia', 'Âç∞Â∞º', 'Âç∞Â∫¶Â∞ºË•ø‰∫ö', 'ÈõÖÂä†Ëææ'],
        'üáÆüá™': ['Ireland', 'Áà±Â∞îÂÖ∞', 'ÊÑõÁàæËò≠', 'ÈÉΩÊüèÊûó'],
        'üáÆüá±': ['Israel', '‰ª•Ëâ≤Âàó'],
        'üáÆüá≤': ['Isle of Man', 'È©¨ÊÅ©Â≤õ', 'È¶¨ÊÅ©Â≥∂'],
        'üáÆüá≥': ['India', 'Âç∞Â∫¶', 'Â≠ü‰π∞', 'MFumbai', 'Mumbai'],
        'üáÆüá∑': ['Iran', '‰ºäÊúó'],
        'üáÆüá∏': ['Iceland', 'ÂÜ∞Â≤õ', 'ÂÜ∞Â≥∂'],
        'üáÆüáπ': ['Italy', 'ÊÑèÂ§ßÂà©', 'Áæ©Â§ßÂà©', 'Á±≥ÂÖ∞', 'Nachash'],
        'üá±üá∞': ['Sri Lanka', 'ÊñØÈáåÂÖ∞Âç°', 'ÊñØÈáåËò≠Âç°'],
        'üá±üá¶': ['Laos', 'ËÄÅÊåù', 'ËÄÅÊíæ'],
        'üá±üáπ': ['Lithuania', 'Á´ãÈô∂ÂÆõ'],
        'üá±üá∫': ['Luxembourg', 'Âç¢Ê£ÆÂ†°'],
        'üá±üáª': ['Latvia', 'ÊãâËÑ±Áª¥‰∫ö', 'Latvija'],
        'üá≤üá¶': ['Morocco', 'Êë©Ê¥õÂì•'],
        'üá≤üá©': ['Moldova', 'Êë©Â∞îÂ§öÁì¶', 'Êë©ÁàæÂ§öÁì¶'],
        'üá≤üá≤': ['Myanmar', 'ÁºÖÁî∏', 'Á∑¨Áî∏'],
        'üá≥üá¨': ['Nigeria', 'Â∞ºÊó•Âà©‰∫ö', 'Â∞ºÊó•Âà©‰∫û'],
        'üá≤üá∞': ['Macedonia', 'È©¨ÂÖ∂È°ø', 'È¶¨ÂÖ∂È†ì'],
        'üá≤üá≥': ['Mongolia', 'ËíôÂè§'],
        'üá≤üá¥': ['Macao', 'Êæ≥Èó®', 'Êæ≥ÈñÄ', 'CTM'],
        'üá≤üáπ': ['Malta', 'È©¨ËÄ≥‰ªñ'],
        'üá≤üáΩ': ['Mexico', 'Â¢®Ë•øÂì•'],
        'üá≤üáæ': ['Malaysia', 'È©¨Êù•', 'È¶¨‰æÜ', 'ÂêâÈöÜÂù°', 'Â§ßÈ¶¨'],
        'üá≥üá±': [
            'Netherlands',
            'Ëç∑ÂÖ∞',
            'Ëç∑Ëò≠',
            'Â∞ºÂæ∑Ëò≠',
            'ÈòøÂßÜÊñØÁâπ‰∏π',
            'Amsterdam',
        ],
        'üá≥üá¥': ['Norway', 'Êå™Â®Å'],
        'üá≥üáµ': ['Nepal', 'Â∞ºÊ≥äÂ∞î'],
        'üá≥üáø': ['New Zealand', 'Êñ∞Ë•øÂÖ∞', 'Êñ∞Ë•øËò≠'],
        'üáµüá¶': ['Panama', 'Â∑¥ÊãøÈ©¨'],
        'üáµüá™': ['Peru', 'ÁßòÈ≤Å', 'Á•ïÈ≠Ø'],
        'üáµüá≠': ['Philippines', 'Ëè≤ÂæãÂÆæ', 'Ëè≤ÂæãË≥ì'],
        'üáµüá∞': ['Pakistan', 'Â∑¥Âü∫ÊñØÂù¶'],
        'üáµüá±': ['Poland', 'Ê≥¢ÂÖ∞', 'Ê≥¢Ëò≠', 'ÂçéÊ≤ô', 'Warsaw'],
        'üáµüá∑': ['Puerto Rico', 'Ê≥¢Â§öÈªéÂêÑ'],
        'üáµüáπ': ['Portugal', 'Ëë°ËêÑÁâô'],
        'üáµüá¨': ['Papua New Guinea', 'Â∑¥Â∏É‰∫öÊñ∞Âá†ÂÜÖ‰∫ö'],
        'üáµüáæ': ['Paraguay', 'Â∑¥ÊãâÂú≠'],
        'üá∑üá¥': ['Romania', 'ÁΩóÈ©¨Â∞º‰∫ö'],
        'üá∑üá∏': ['Serbia', 'Â°ûÂ∞îÁª¥‰∫ö'],
        'üá∑üá™': ['R√©union', 'ÁïôÂ∞ºÊ±™', 'Ê≥ïÂ±ûÁïôÂ∞ºÊ±™'],
        'üá∑üá∫': [
            'Russia',
            '‰øÑÁΩóÊñØ',
            '‰øÑÂõΩ',
            '‰øÑÁæÖÊñØ',
            '‰ºØÂäõ',
            'Ëé´ÊñØÁßë',
            'Âú£ÂΩºÂæóÂ†°',
            'Ë•ø‰ºØÂà©‰∫ö',
            '‰∫¨‰øÑ',
            'Êù≠‰øÑ',
            'Âª£‰øÑ',
            'Êª¨‰øÑ',
            'Âπø‰øÑ',
            'Ê≤™‰øÑ',
            'Moscow',
        ],
        'üá∏üá¶': ['Saudi', 'Ê≤ôÁâπÈòøÊãâ‰ºØ', 'Ê≤ôÁâπ', 'Riyadh', 'Âà©ÈõÖÂæó'],
        'üá∏üá™': ['Sweden', 'ÁëûÂÖ∏', 'ÊñØÂæ∑Âì•Â∞îÊë©', 'Stockholm'],
        'üá∏üá¨': [
            'Singapore',
            'Êñ∞Âä†Âù°',
            'ÁãÆÂüé',
            'Ê≤™Êñ∞',
            '‰∫¨Êñ∞',
            '‰∏≠Êñ∞',
            'Ê≥âÊñ∞',
            'Á©óÊñ∞',
            'Ê∑±Êñ∞',
            'Êù≠Êñ∞',
            'ÂπøÊñ∞',
            'Âª£Êñ∞',
            'Êª¨Êñ∞',
        ],
        'üá∏üáÆ': ['Slovenia', 'ÊñØÊ¥õÊñáÂ∞º‰∫ö'],
        'üá∏üá∞': ['Slovakia', 'ÊñØÊ¥õ‰ºêÂÖã'],
        'üáπüá¨': ['Togo', 'Â§öÂì•', 'Ê¥õÁæé', 'Lom√©', 'Lome'], // Â§öÂì•
        'üáπüá≠': ['Thailand', 'Ê≥∞ÂõΩ', 'Ê≥∞Âúã', 'ÊõºË∞∑'],
        'üáπüá≥': ['Tunisia', 'Á™ÅÂ∞ºÊñØ'],
        'üáπüá∑': ['Turkey', 'ÂúüËÄ≥ÂÖ∂', '‰ºäÊñØÂù¶Â∏ÉÂ∞î', 'Istanbul'],
        'üáπüáº': [
            'Taiwan',
            'Âè∞Êπæ',
            'Ëá∫ÁÅ£',
            'Âè∞ÁÅ£',
            '‰∏≠ËèØÊ∞ëÂúã',
            '‰∏≠ÂçéÊ∞ëÂõΩ',
            'Âè∞Âåó',
            'Âè∞‰∏≠',
            'Êñ∞Âåó',
            'ÂΩ∞Âåñ',
            'Âè∞',
            'Ëá∫',
            'Taipei',
            'Tai Wan',
        ],
        'üá∫üá¶': ['Ukraine', '‰πåÂÖãÂÖ∞', 'ÁÉèÂÖãËò≠'],
        'üá∫üá∏': [
            'United States',
            'ÁæéÂõΩ',
            'America',
            'Áæé',
            '‰∫¨Áæé',
            'Ê≥¢ÁâπÂÖ∞',
            'ËææÊãâÊñØ',
            '‰øÑÂãíÂÜà',
            'Oregon',
            'Âá§Âá∞Âüé',
            'Ë¥πÂà©Ëíô',
            'Á°ÖË∞∑',
            'ÁüΩË∞∑',
            'ÊãâÊñØÁª¥Âä†ÊñØ',
            'Ê¥õÊùâÁü∂',
            'Âú£‰ΩïÂ°û',
            'Âú£ÂÖãÊãâÊãâ',
            'Ë•øÈõÖÂõæ',
            'ËäùÂä†Âì•',
            'Ê≤™Áæé',
            'Âì•‰º¶Â∏É',
            'Á∫ΩÁ∫¶',
            'New York',
            'Los Angeles',
            'San Jose',
            'Sillicon Valley',
            'Michigan',
            '‰øÑ‰∫•‰øÑ',
            'Ohio',
            'È©¨Á∫≥Ëê®ÊñØ',
            'Manassas',
            'ÂºóÂêâÂ∞º‰∫ö',
            'Virginia',
        ],
        'üá∫üáæ': ['Uruguay', '‰πåÊãâÂú≠'],
        'üáªüá™': ['Venezuela', 'ÂßîÂÜÖÁëûÊãâ'],
        'üáªüá≥': ['Vietnam', 'Ë∂äÂçó', 'ËÉ°ÂøóÊòé'],
        'üáøüá¶': ['South Africa', 'ÂçóÈùû'],
        'üá®üá≥': [
            'China',
            '‰∏≠ÂõΩ',
            '‰∏≠Âúã',
            'ÂõûÂõΩ',
            'ÂõûÂúã',
            'ÂõΩÂÜÖ',
            'ÂúãÂÖß',
            'Âçé‰∏ú',
            'ÂçéË•ø',
            'ÂçéÂçó',
            'ÂçéÂåó',
            'Âçé‰∏≠',
            'Ê±üËãè',
            'Âåó‰∫¨',
            '‰∏äÊµ∑',
            'ÂπøÂ∑û',
            'Ê∑±Âú≥',
            'Êù≠Â∑û',
            'ÂæêÂ∑û',
            'ÈùíÂ≤õ',
            'ÂÆÅÊ≥¢',
            'ÈïáÊ±ü',
        ],
    };

    // ÂéüÊóóÂ∏úÊàñÁ©∫
    let Flag =
        name.match(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]/)?.[0] ||
        'üè¥‚Äç‚ò†Ô∏è';
    //console.log(`oldFlag = ${Flag}`)
    // ÊóóÂ∏úÂåπÈÖç
    for (let flag of Object.keys(Flags)) {
        const keywords = Flags[flag];
        //console.log(`keywords = ${keywords}`)
        if (
            // ‰∏çÁ≤æÁ°ÆÂåπÈÖçÔºàÂè™Ë¶ÅÂåÖÂê´Â∞±ÁÆó,ÂøΩÁï•Â§ßÂ∞èÂÜô)
            keywords.some((keyword) => RegExp(`${keyword}`, 'i').test(name))
        ) {
            if (/ÂÜÖËíôÂè§/.test(name) && ['üá≤üá≥'].includes(flag)) {
                return (Flag = 'üá®üá≥');
            }
            return (Flag = flag);
        }
    }
    // ISOÊóóÂ∏úÂåπÈÖç
    for (let flag of Object.keys(ISOFlags)) {
        const keywords = ISOFlags[flag];
        //console.log(`keywords = ${keywords}`)
        if (
            // Á≤æÁ°ÆÂåπÈÖç(‰∏§‰æßÂùáÊúâÂàÜÂâ≤)
            keywords.some((keyword) =>
                RegExp(`(^|[^a-zA-Z])${keyword}([^a-zA-Z]|$)`).test(name),
            )
        ) {
            const isCN2 =
                flag == 'üá®üá≥' &&
                RegExp(`(^|[^a-zA-Z])CN2([^a-zA-Z]|$)`).test(name);
            if (!isCN2) {
                return (Flag = flag);
            }
        }
    }

    //console.log(`Final Flag = ${Flag}`)
    return Flag;
}

export function getISO(name) {
    return ISOFlags[getFlag(name)]?.[0];
}

// remove flag
export function removeFlag(str) {
    return str
        .replace(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]|üè¥‚Äç‚ò†Ô∏è|üè≥Ô∏è‚Äçüåà/g, '')
        .trim();
}

export class MMDB {
    constructor({ country, asn } = {}) {
        if ($.env.isNode) {
            const Reader = eval(`require("@maxmind/geoip2-node")`).Reader;
            const fs = eval("require('fs')");
            const countryFile =
                country || eval('process.env.SUB_STORE_MMDB_COUNTRY_PATH');
            const asnFile = asn || eval('process.env.SUB_STORE_MMDB_ASN_PATH');
            // $.info(
            //     `GeoLite2 Country MMDB: ${countryFile}, exists: ${fs.existsSync(
            //         countryFile,
            //     )}`,
            // );
            if (countryFile) {
                this.countryReader = Reader.openBuffer(
                    fs.readFileSync(countryFile),
                );
            }
            // $.info(
            //     `GeoLite2 ASN MMDB: ${asnFile}, exists: ${fs.existsSync(
            //         asnFile,
            //     )}`,
            // );
            if (asnFile) {
                if (!fs.existsSync(asnFile))
                    throw new Error('GeoLite2 ASN MMDB does not exist');
                this.asnReader = Reader.openBuffer(fs.readFileSync(asnFile));
            }
        }
    }
    geoip(ip) {
        return this.countryReader?.country(ip)?.country?.isoCode;
    }
    ipaso(ip) {
        return this.asnReader?.asn(ip)?.autonomousSystemOrganization;
    }
    ipasn(ip) {
        return this.asnReader?.asn(ip)?.autonomousSystemNumber;
    }
}
